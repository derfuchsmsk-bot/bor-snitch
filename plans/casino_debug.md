# Отчет по проверке механики Казино

## Проблема
Поступило сообщение о подозрительно высоком винрейте: "3 из 3 выиграли", затем "4 из 4". Требовалось проверить корректность работы генератора случайных чисел.

## Анализ
1. **Код:** Изначально использовался `random.choice([True, False])` (50/50).
2. **Вероятность:** Серия из 4 побед имеет вероятность 6.25%.
3. **Результат:** Пользователь подтвердил, что выигрыши были у **разных участников**. Это подтверждает гипотезу о случайном распределении (Variance), а не технической ошибке.

## Проведенные тесты
Была запущена симуляция 1000 бросков:
- Побед: 495 (49.5%)
- Поражений: 505 (50.5%)
- Макс. стрик побед: 7

Это доказывает корректность работы ГСЧ.

## Внесенные изменения
По запросу пользователя вероятность победы была скорректирована:
- **Было:** 50%
- **Стало:** 49% (в пользу казино)

Параметр вынесен в конфиг `src/utils/game_config.py` как `GAMBLE_WIN_CHANCE`.

## Расчет RTP (Return to Player) и Математического Ожидания

Поскольку в системе "Снитч" очки — это плохо (чем их меньше, тем лучше), расчет строится следующим образом:

**Параметры:**
- Вероятность победы ($P_{win}$): **49%** (0.49)
- Награда за победу ($V_{win}$): **-50 очков** (Списание)
- Вероятность поражения ($P_{loss}$): **51%** (0.51)
- Штраф за поражение ($V_{loss}$): **+75 очков** (Начисление)

**Математическое ожидание (EV) за один прокрут:**
$$ EV = (P_{win} \times V_{win}) + (P_{loss} \times V_{loss}) $$
$$ EV = (0.49 \times -50) + (0.51 \times 75) $$
$$ EV = -24.5 + 38.25 $$
$$ EV = +13.75 \text{ очков} $$

**Вывод:**
Казино работает "в плюс" для системы (и в минус для игрока). В среднем каждый игрок будет получать **+13.75 очков** штрафа за каждую игру на длинной дистанции.

## Заключение
Код работает исправно. Вероятности скорректированы. Логирование активно.
