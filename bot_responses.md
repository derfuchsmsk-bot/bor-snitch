# Ð—Ð°Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð±Ð¾Ñ‚Ð°

Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð²ÑÐµ Ð¶ÐµÑÑ‚ÐºÐ¾ Ð·Ð°ÐºÐ¾Ð´Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð±Ð¾Ñ‚Ð°, Ð½Ð°Ð¹Ð´ÐµÐ½Ð½Ñ‹Ðµ Ð² Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð¼ ÐºÐ¾Ð´Ðµ.

## Ð¤Ð°Ð¹Ð»: `src/bot/handlers.py`

### ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° `/start`
> "Ð¯ Ð¡Ð½Ð¸Ñ‚Ñ‡-Ð±Ð¾Ñ‚. Ð¯ ÑÐ»ÐµÐ¶Ñƒ Ð·Ð° Ð²Ð°Ð¼Ð¸. ðŸ‘ï¸"
> 
> [src/bot/handlers.py:13](src/bot/handlers.py:13)

### ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° `/stats`
> "ðŸ† *Ð¢Ð¾Ð¿ Ð¡Ð½Ð¸Ñ‚Ñ‡ÐµÐ¹ (Ð¡ÐµÐ·Ð¾Ð½ {current_season}):*\n\n"
> 
> [src/bot/handlers.py:45](src/bot/handlers.py:45)

> "ÐŸÐ¾ÐºÐ° Ð¿ÑƒÑÑ‚Ð¾. Ð¡ÐµÐ·Ð¾Ð½ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð°Ñ‡Ð°Ð»ÑÑ! ðŸ‚"
> 
> [src/bot/handlers.py:48](src/bot/handlers.py:48)

> "{i}. {data.get('username', 'Unknown')} â€” {points} Ð¾Ñ‡ÐºÐ¾Ð²\n"
> 
> [src/bot/handlers.py:56](src/bot/handlers.py:56)

> "   ÐœÐ°ÑÑ‚ÑŒ: {rank}\n"
> 
> [src/bot/handlers.py:57](src/bot/handlers.py:57)

> "   Ð¡Ð½Ð¸Ñ‚Ñ‡ Ð”Ð½Ñ: {wins} | ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÑÑ Ð¼Ð°Ð»ÑÐ²Ð°: {data.get('last_title', '-')}\n\n"
> 
> [src/bot/handlers.py:58](src/bot/handlers.py:58)

### ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° `/rules`
> "ðŸ“œ *ÐšÐ¾Ð´ÐµÐºÑ Ð¡Ð½Ð¸Ñ‚Ñ‡Ð°*\n\n"
> "Ð—Ð° Ñ‡Ñ‚Ð¾ Ð½Ð°Ñ‡Ð¸ÑÐ»ÑÑŽÑ‚ÑÑ Ð¾Ñ‡ÐºÐ¸ (ÑÑƒÐ¼Ð¼Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ Ð·Ð° Ð´ÐµÐ½ÑŒ):\n"
> "ðŸ”¹ *ÐÑ‹Ñ‚ÑŒÐµ* â€” 10 pts\n"
> "ðŸ”¹ *Ð”ÑƒÑ…Ð¾Ñ‚Ð°/Ð˜Ð³Ð½Ð¾Ñ€* â€” 15 pts\n"
> "ðŸ”¹ *ÐšÑ€Ð¸Ð½Ð¶* â€” 20 pts\n"
> "ðŸ”¹ *Ð¢Ð¾ÐºÑÐ¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ* â€” 25 pts\n"
> "ðŸ”¹ *Ð¡Ð½Ð¸Ñ‚Ñ‡ÐµÐ²Ð°Ð½Ð¸Ðµ* â€” 50 pts\n\n"
> "âš ï¸ *ÐžÑÐ¾Ð±Ñ‹Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°:*\n"
> "ðŸ¤¡ Ð ÐµÐ°ÐºÑ†Ð¸Ñ ÐºÐ»Ð¾ÑƒÐ½Ð° = Ð¢Ð¾ÐºÑÐ¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ\n"
> "ðŸ‘» Ð˜Ð³Ð½Ð¾Ñ€ Ñ‚ÐµÐ³Ð° = Ð”ÑƒÑ…Ð¾Ñ‚Ð° Ð¸Ð»Ð¸ Ð¢Ð¾ÐºÑÐ¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ\n"
> "ðŸ§¹ *Ð•Ð¶ÐµÐ½ÐµÐ´ÐµÐ»ÑŒÐ½Ð°Ñ ÐÐ¼Ð½Ð¸ÑÑ‚Ð¸Ñ:* ÐšÐ°Ð¶Ð´Ð¾Ðµ Ð²Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ Ð¾Ñ‡ÐºÐ¸ Ð´ÐµÐ»ÑÑ‚ÑÑ Ð½Ð° 2.\n\n"
> "ðŸ‘‘ *ÐœÐ°ÑÑ‚Ð¸:*\n"
> "â–«ï¸ 0-49: ÐŸÐ¾Ñ€ÑÐ´Ð¾Ñ‡Ð½Ñ‹Ð¹ ðŸ˜\n"
> "â–«ï¸ 50-249: Ð¨Ð½Ñ‹Ñ€ÑŒ ðŸ§¹\n"
> "â–«ï¸ 250-749: ÐšÐ¾Ð·Ñ‘Ð» ðŸ\n"
> "â–«ï¸ 750-1499: ÐžÐ±Ð¸Ð¶ÐµÐ½Ð½Ñ‹Ð¹ ðŸš½\n"
> "â–«ï¸ 1500+: ÐœÐ°ÑÑ‚ÑŒ ÐŸÑ€Ð¾Ñ‚ÐºÐ½ÑƒÑ‚Ð°Ñ ðŸ‘‘"
> 
> [src/bot/handlers.py:68](src/bot/handlers.py:68)

### ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° `/status` (Ð¸Ð»Ð¸ `/me`)
> "ðŸ‘¤ *{target_user.full_name}* Ð±ÐµÐ· ÐºÐ¾ÑÑÐºÐ¾Ð². (0 Ð¾Ñ‡ÐºÐ¾Ð²)"
> 
> [src/bot/handlers.py:107](src/bot/handlers.py:107)

> f"ðŸ‘¤ *Ð›Ð¸Ñ‡Ð½Ð¾Ðµ Ð”ÐµÐ»Ð¾:* {target_user.full_name}\n\n"
> f"ðŸ·ï¸ *ÐœÐ°ÑÑ‚ÑŒ:* {rank}\n"
> f"âš–ï¸ *ÐžÑ‡ÐºÐ¸:* {points}\n"
> f"ðŸ† *Ð¡Ð½Ð¸Ñ‚Ñ‡ Ð”Ð½Ñ:* {wins}\n"
> f"ðŸ”– *ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÑÑ Ð¼Ð°Ð»ÑÐ²Ð°:* {last_title}"
> 
> [src/bot/handlers.py:116](src/bot/handlers.py:116)

### ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° `/report`
> "âŒ *ÐžÑˆÐ¸Ð±ÐºÐ°:* Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð¼ Ð½Ð° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÑÐ½Ð¸Ñ‚Ñ‡Ð°."
> 
> [src/bot/handlers.py:130](src/bot/handlers.py:130)

> "âŒ Ð¡Ð°Ð¼Ð¾Ð´Ð¾Ð½Ð¾Ñ? Ð­Ñ‚Ð¾ ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾ Ð¿Ð¾Ñ…Ð²Ð°Ð»ÑŒÐ½Ð¾, Ð½Ð¾ Ð½ÐµÑ‚."
> 
> [src/bot/handlers.py:137](src/bot/handlers.py:137)

> "ðŸ•µï¸â€â™‚ï¸ *ÐÐ½Ð°Ð»Ð¸Ð· Ð´Ð¾Ð½Ð¾ÑÐ°...*"
> 
> [src/bot/handlers.py:140](src/bot/handlers.py:140)

> f"âœ… *Ð”Ð¾Ð½Ð¾Ñ Ð¿Ñ€Ð¸Ð½ÑÑ‚!*\n\n"
> f"ðŸ“‚ *ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ:* {category}\n"
> f"ðŸ“ *Ð’ÐµÑ€Ð´Ð¸ÐºÑ‚:* {reason}\n"
> f"ðŸ‘®â€â™‚ï¸ _ÐÑƒ Ñ‚Ñ‹ ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾ ÐºÐ¾Ð·Ñ‘Ð»._"
> 
> [src/bot/handlers.py:158](src/bot/handlers.py:158)

> f"âŒ *ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾.*\n\n"
> f"Ð­Ñ‚Ð¾ Ð½Ðµ Ð¼Ð°ÑÑ‚ÑŒ. Ð¥Ð²Ð°Ñ‚Ð¸Ñ‚ ÑÐ¿Ð°Ð¼Ð¸Ñ‚ÑŒ, Ñ‚Ñ‹ ÑƒÐ¶Ðµ Ñ…Ð¾Ð´Ð¸ÑˆÑŒ Ð¿Ð¾Ð´ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð¼, ÐºÐ»Ð¾ÑƒÐ½.\n"
> f"_(ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°: {deny_reason})_"
> 
> [src/bot/handlers.py:167](src/bot/handlers.py:167)

---

## Ð¤Ð°Ð¹Ð»: `src/main.py`

### ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº (Scheduled Decay)
> "ðŸ§¹ *Ð•Ð¶ÐµÐ½ÐµÐ´ÐµÐ»ÑŒÐ½Ð°Ñ ÐÐ¼Ð½Ð¸ÑÑ‚Ð¸Ñ!*\n\nÐžÑ‡ÐºÐ¸ Ð²ÑÐµÑ… Ð¼Ð¾Ñ€Ð³ÑƒÐ½Ñ‡Ð¸ÐºÐ¾Ð² Ð¿Ð¾Ð´ÐµÐ»ÐµÐ½Ñ‹ Ð½Ð° Ð´Ð²Ð¾Ðµ. Ð£ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ ÑˆÐ°Ð½Ñ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒÑÑ (Ð¸Ð»Ð¸ Ð·Ð°Ð¼Ð°ÑÑ‚Ð¸Ñ‚ÑŒÑÑ ÑÐ½Ð¾Ð²Ð°)."
> 
> [src/main.py:42](src/main.py:42)

> "ðŸ§¹ *Ð•Ð¶ÐµÐ½ÐµÐ´ÐµÐ»ÑŒÐ½Ð°Ñ ÐÐ¼Ð½Ð¸ÑÑ‚Ð¸Ñ!*\n\nÐžÑ‡ÐºÐ¸ Ð²ÑÐµÑ… Ð¼Ð°ÑÑ‚ÑŽÐ³Ð°Ð½Ð¾Ð² Ð¿Ð¾Ð´ÐµÐ»ÐµÐ½Ñ‹ Ð½Ð° Ð´Ð²Ð¾Ðµ. Ð£ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ ÑˆÐ°Ð½Ñ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒÑÑ (Ð¸Ð»Ð¸ Ð·Ð°Ð¼Ð°ÑÑ‚Ð¸Ñ‚ÑŒÑÑ ÑÐ½Ð¾Ð²Ð°)."
> 
> [src/main.py:174](src/main.py:174)

### ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´ (Startup)
> description="ÐœÐ¾Ðµ Ð»Ð¸Ñ‡Ð½Ð¾Ðµ Ð´ÐµÐ»Ð¾"
> 
> [src/main.py:57](src/main.py:57)

> description="Ð¢Ð¾Ð¿ Ð¡Ð½Ð¸Ñ‚Ñ‡ÐµÐ¹"
> 
> [src/main.py:58](src/main.py:58)

> description="ÐšÐ¾Ð´ÐµÐºÑ Ð¡Ð½Ð¸Ñ‚Ñ‡Ð°"
> 
> [src/main.py:59](src/main.py:59)

> description="Ð”Ð¾Ð½Ð¾Ñ (Reply)"
> 
> [src/main.py:60](src/main.py:60)

### ÐÐ½Ð°Ð»Ð¸Ð· Ð´Ð½Ñ (Analyze Daily)
> "Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ñ‚Ð¸Ñ…Ð¾... Ð¡Ð½Ð¸Ñ‚Ñ‡ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½. (ÐÐµÑ‚ Ð»Ð¾Ð³Ð¾Ð²)"
> 
> [src/main.py:116](src/main.py:116)

> "âœ¨ *Ð˜Ð¢ÐžÐ“Ð˜ Ð”ÐÐ¯* âœ¨\n\nÐ¡ÐµÐ³Ð¾Ð´Ð½Ñ Ð² Ñ‡Ð°Ñ‚Ðµ Ñ†Ð°Ñ€Ð¸Ð»Ð° Ð³Ð°Ñ€Ð¼Ð¾Ð½Ð¸Ñ. ÐÐ¸ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ñ! ðŸ•Šï¸"
> 
> [src/main.py:132](src/main.py:132)

> "ðŸš¨ *Ð˜Ð¢ÐžÐ“Ð˜ Ð”ÐÐ¯* ðŸš¨\n\n"
> 
> [src/main.py:134](src/main.py:134)

> f"{i}. ðŸ‘¤ [{username}](tg://user?id={user_id}) (+{off.get('points', 0)} pts)\n"
> 
> [src/main.py:141](src/main.py:141)

> f"{i}. ðŸ‘¤ *{username}* (+{off.get('points', 0)} pts)\n"
> 
> [src/main.py:143](src/main.py:143)

> f"   ðŸ† *ÐœÐ°Ð»ÑÐ²Ð° Ð¿Ð¾ ÑÑ‚Ð°Ð¿Ñƒ:* {off.get('title', '-')}\n"
> 
> [src/main.py:144](src/main.py:144)

> f"   ðŸ“ *Ð’ÐµÑ€Ð´Ð¸ÐºÑ‚:* {off.get('reason', '-')}\n"
> 
> [src/main.py:145](src/main.py:145)

> f"   ðŸ’¬ _{quote}_\n"
> 
> [src/main.py:147](src/main.py:147)
