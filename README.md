# Bor Snitch Bot üèÜ

Telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∫—É –≤ —á–∞—Ç–µ –¥—Ä—É–∑–µ–π –∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç "–°–Ω–∏—Ç—á–∞ –¥–Ω—è" (–≥–ª–∞–≤–Ω–æ–≥–æ –º—É–¥–∞–∫–∞/—É–µ–±–∞–Ω–∞) —Å –ø–æ–º–æ—â—å—é Gemini AI (Vertex AI).

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
*   **Python 3.11** + **Aiogram 3**
*   **FastAPI** (–¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤ –∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤)
*   **Google Cloud Firestore** (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
*   **Vertex AI** (Gemini 1.5 Flash)
*   **Cloud Run** (–•–æ—Å—Ç–∏–Ω–≥)
*   **Cloud Scheduler** (–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –î–µ–ø–ª–æ–π

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ GCP –ø—Ä–æ–µ–∫—Ç–∞
1.  –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ [Google Cloud Console](https://console.cloud.google.com/).
2.  –í–∫–ª—é—á–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API:
    *   Cloud Run API
    *   Artifact Registry API
    *   Cloud Build API
    *   Firestore API
    *   Vertex AI API
    *   Cloud Scheduler API

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ
1.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
    ```bash
    cp .env.example .env
    ```
2.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ):
    ```bash
    pip install -r requirements.txt
    ```

### 3. –î–µ–ø–ª–æ–π –≤ Cloud Run

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `gcloud` CLI.

```bash
# –õ–æ–≥–∏–Ω
gcloud auth login
gcloud config set project YOUR_PROJECT_ID

# –°–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π
gcloud run deploy bor-snitch \
  --source . \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars "TELEGRAM_TOKEN=your_token,GCP_PROJECT_ID=your_project_id,SECRET_TOKEN=your_secret,GCP_LOCATION=us-central1"
```

*–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: `--allow-unauthenticated` –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã Telegram –º–æ–≥ —Å—Ç—É—á–∞—Ç—å—Å—è –Ω–∞ –≤–µ–±—Ö—É–∫. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–æ–∫–µ–Ω–æ–≤ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ö–æ—Ç—è Telegram —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç —Å–∫—Ä—ã—Ç—ã–π URL, –∑–¥–µ—Å—å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π).*

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Webhook

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ URL —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://bor-snitch-xyz.run.app`).
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–µ–±—Ö—É–∫ –¥–ª—è Telegram:

```bash
curl -F "url=https://YOUR_SERVICE_URL/webhook" https://api.telegram.org/botYOUR_TELEGRAM_TOKEN/setWebhook
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloud Scheduler (–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑)

–°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –¥–µ—Ä–≥–∞—Ç—å –±–æ—Ç–∞ —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ 23:55).

1.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Cloud Scheduler.
2.  –°–æ–∑–¥–∞–π—Ç–µ Job:
    *   **Frequency:** `55 23 * * *` (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 23:55)
    *   **Target type:** HTTP
    *   **URL:** `https://YOUR_SERVICE_URL/analyze_daily`
    *   **HTTP Method:** POST
    *   **Body:** `{"chat_id": -1001234567890}` (ID –≤–∞—à–µ–≥–æ —á–∞—Ç–∞)
    *   **Headers:**
        *   `Content-Type`: `application/json`
        *   `X-Secret-Token`: `your_secret` (—Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ .env)

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
1.  –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ —á–∞—Ç.
2.  –î–∞–π—Ç–µ –µ–º—É –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—á—Ç–æ–±—ã –æ–Ω –≤–∏–¥–µ–ª —Å–æ–æ–±—â–µ–Ω–∏—è, –µ—Å–ª–∏ Privacy Mode –≤–∫–ª—é—á–µ–Ω, –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ Privacy Mode —á–µ—Ä–µ–∑ BotFather). **–í–∞–∂–Ω–æ:** –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±–æ—Ç –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.
3.  –ë–æ—Ç –º–æ–ª—á–∞ –ø–∏—à–µ—Ç –ª–æ–≥–∏.
4.  –ö–æ–º–∞–Ω–¥–∞ `/start` —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —á–∞—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
5.  –ö–æ–º–∞–Ω–¥–∞ `/stats` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ø —Å–Ω–∏—Ç—á–µ–π.

## üõ° –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
–ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Firestore –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —á–∞—Ç–∞ —Å–æ–≥–ª–∞—Å–Ω—ã —Å —ç—Ç–∏–º (–∏–ª–∏ –Ω–µ—Ç, —ç—Ç–æ –∂–µ —á–∞—Ç —Å–Ω–∏—Ç—á–µ–π).
